<div class="notifications-actions" (click)="$event.stopPropagation()">
  <div class="custom-select-container">

    <div class="custom-select-trigger" (click)="toggleTypeDropdown()">
      <span>{{ selectedType || 'Todos' }}</span>
      <mat-icon>expand_more</mat-icon>
    </div>

    <div class="custom-select-panel" *ngIf="typeDropdownOpen">
      <div class="custom-option" (click)="selectType('')">Todos</div>
      <div class="custom-option" (click)="selectType('Sistema')">Sistema</div>
      <div class="custom-option"
        (click)="selectType('Información')">Información</div>
      <div class="custom-option"
        (click)="selectType('Advertencia')">Advertencia</div>
      <div class="custom-option"
        (click)="selectType('Recordatorio')">Recordatorio</div>
    </div>
  </div>

  <!-- FILTRO LEÍDO / NO LEÍDO -->
  <mat-button-toggle-group (change)="onReadFilterChange($event.value)">
    <mat-button-toggle [value]="''">Todos</mat-button-toggle>
    <mat-button-toggle value="unread">No leídos</mat-button-toggle>
    <mat-button-toggle value="read">Leídos</mat-button-toggle>
  </mat-button-toggle-group>
</div>

<div class="notification-content">
  <div class="empty-state" *ngIf="filteredNotifications.length === 0">
    <mat-icon class="empty-icon">notifications_none</mat-icon>
    <h3>No tienes notificaciones</h3>
    <p>Cuando tengas nuevas notificaciones aparecerán aquí</p>
  </div>

  <div class="notifications-list" *ngIf="filteredNotifications.length > 0">

    <!-- <div class="notifications-actions">
      <button mat-button class="mark-all-btn"
              (click)="markAllAsRead()"
              *ngIf="unreadCount > 0">
        <mat-icon>done_all</mat-icon>
        Marcar todas como leídas
      </button>

      <button mat-button class="clear-all-btn"
              (click)="clearAll()">
        <mat-icon>clear_all</mat-icon>
        Limpiar todo
      </button>
    </div> -->

    <!-- ITEMS -->
    <div class="notification-item"
      *ngFor="let notification of filteredNotifications; trackBy: trackByFn"
      (click)="onNotificationClick(notification)"
      [class.unread]="!notification.read"
      [class.read]="notification.read">

      <!-- ICON -->
      <div class="notification-icon"
        [ngClass]="'icon-' + notification.type">
        <mat-icon>{{ getNotificationIcon(notification.notificationTypeName)
          }}</mat-icon>
      </div>

      <!-- BODY -->
      <div class="notification-body">
        <div class="notification-header">
          <h4 class="notification-title">{{ notification.title }}</h4>
          <span class="notification-time">{{ getTimeAgo(notification.sendDate)
            }}</span>
        </div>

        <p class="notification-message"
          [class.expanded]="isExpanded(notification.id)">
          {{ notification.message }}
        </p>

        <div class="read-more"
          *ngIf="shouldShowReadMore(notification)">
          <button mat-button class="read-more-btn"
            (click)="toggleExpand(notification.id); $event.stopPropagation()">
            {{ isExpanded(notification.id) ? 'Ver menos' : 'Ver más' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

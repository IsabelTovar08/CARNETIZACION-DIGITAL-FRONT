<h1 mat-dialog-title>{{ title }}</h1>
<div mat-dialog-content>
  <form [formGroup]="form">

    <ng-container *ngFor="let field of fields">
      <ng-container *ngIf="!field.hidden">

        <!-- Input normal -->
        <mat-form-field class="w-100" appearance="fill"
          *ngIf="field.type !== 'textarea'">
          <mat-label>{{ field.label }}</mat-label>
          <input matInput [formControlName]="field.name"
            [type]="field.type || 'text'" />
        </mat-form-field>

        <mat-form-field class="w-100" appearance="fill"
          *ngIf="field.type === 'textarea'">
          <mat-label>{{ field.label }}</mat-label>
          <textarea matInput [formControlName]="field.name"></textarea>
        </mat-form-field>

        <!-- Select -->
        <ng-container *ngIf="field.type === 'select'">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{ field.label }}</mat-label>
            <mat-select [formControlName]="field.id">
              <mat-option *ngFor="let opt of field.options" [value]="opt.value">
                {{ opt.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </ng-container>
    </ng-container>

  </form>
</div>

<div mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="save()"
    [disabled]="form.invalid">Guardar</button>
</div>

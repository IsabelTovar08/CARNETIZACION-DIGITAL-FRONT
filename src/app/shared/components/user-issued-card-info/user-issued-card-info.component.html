
<div class="profile-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Cargando información...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>

  <!-- Profile Content -->
  <div *ngIf="userData && !loading" class="profile-content">
    <!-- Header Section -->
    <div class="profile-header">
      <div class="photo-section">
        <img
          [src]="userData.userPhotoUrl || 'assets/default-avatar.png'"
          [alt]="userData.name"
          class="profile-photo"
          (error)="onImageError($event)">
        <img
          [src]="userData.logoUrl"
          [alt]="userData.companyName"
          class="company-logo"
          (error)="onLogoError($event)">
      </div>
      <div class="header-info">
        <h1>{{ userData.name }}</h1>
        <p class="profile-type">{{ userData.profile }}</p>
        <p class="category">{{ userData.categoryArea }}</p>
      </div>
    </div>

    <!-- Main Information -->
    <div class="info-grid">
      <div class="info-section">
        <h2>Información Personal</h2>
        <div class="info-item">
          <span class="label">Documento:</span>
          <span class="value">{{ userData.documentNumber }}</span>
        </div>
        <div class="info-item" *ngIf="userData.bloodTypeValue">
          <span class="label">Tipo de Sangre:</span>
          <span class="value">{{ userData.bloodTypeValue }}</span>
        </div>
        <div class="info-item">
          <span class="label">Teléfono:</span>
          <span class="value">{{ userData.phoneNumber }}</span>
        </div>
        <div class="info-item" *ngIf="userData.email">
          <span class="label">Email:</span>
          <span class="value">{{ userData.email }}</span>
        </div>
      </div>

      <div class="info-section">
        <h2>Información Organizacional</h2>
        <div class="info-item">
          <span class="label">Empresa:</span>
          <span class="value">{{ userData.companyName }}</span>
        </div>
        <div class="info-item">
          <span class="label">Unidad Organizacional:</span>
          <span class="value">{{ userData.organizationalUnit }}</span>
        </div>
        <div class="info-item">
          <span class="label">División:</span>
          <span class="value">{{ userData.internalDivisionName }}</span>
        </div>
      </div>

      <div class="info-section">
        <h2>Información de Sucursal</h2>
        <div class="info-item">
          <span class="label">Sucursal:</span>
          <span class="value">{{ userData.branchName }}</span>
        </div>
        <div class="info-item">
          <span class="label">Dirección:</span>
          <span class="value">{{ userData.branchAddress }}</span>
        </div>
        <div class="info-item">
          <span class="label">Teléfono:</span>
          <span class="value">{{ userData.branchPhone }}</span>
        </div>
        <div class="info-item">
          <span class="label">Email:</span>
          <span class="value">{{ userData.branchEmail }}</span>
        </div>
      </div>

      <div class="info-section">
        <h2>Validez del Carnet</h2>
        <div class="info-item">
          <span class="label">Válido Desde:</span>
          <span class="value">{{ formatDate(userData.validFrom) }}</span>
        </div>
        <div class="info-item">
          <span class="label">Válido Hasta:</span>
          <span class="value">{{ formatDate(userData.validUntil) }}</span>
        </div>
      </div>
    </div>

    <!-- Action Button -->
    <div class="action-section">
      <button class="btn-carnet" (click)="verCarnet(userData)">
        Ver Carnet
      </button>
    </div>
  </div>
</div>
